!function(){function n(){function t(){const n=window.top.document.querySelector(".sh-onboarding-overlay-k8x7m");n&&n.remove();const t=window.top.document.createElement("div");t.className="sh-onboarding-overlay-k8x7m",t.innerHTML='\n        <div class="sh-onboarding-spotlight-q4w6r"></div>\n        <div class="sh-onboarding-tooltip-x2v5b">\n          <div class="tooltip-content-z7h1j">\n            <div class="tooltip-header-a9c4f">\n              <h3>Welcome to SquareHero!</h3>\n            </div>\n            <div class="tooltip-body-j5l9m">\n              <p>Click the SquareHero icon in your toolbar to open Advanced Product Manager.</p>\n            </div>\n\n          </div>\n          <div class="tooltip-arrow-n6v2c"></div>\n        </div>\n      ';const e=window.top.document.createElement("style");e.textContent='\n        .sh-onboarding-overlay-k8x7m {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          z-index: 999999;\n          pointer-events: auto;\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\n        }\n        \n        .sh-onboarding-spotlight-q4w6r {\n          position: absolute;\n          width: 45px;\n          height: 30px;\n          border-radius: 6px;\n          box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7);\n          background: transparent;\n          transition: all 0.3s ease-out;\n          animation: sh-spotlight-pulse 2s ease-in-out infinite;\n          pointer-events: none;\n        }\n        \n        .sh-onboarding-tooltip-x2v5b {\n          position: absolute;\n          background: #f3fcfe;\n          border-radius: 12px;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 8px 25px rgba(0, 0, 0, 0.15);\n          max-width: 320px;\n          pointer-events: auto;\n          animation: sh-tooltip-appear 0.6s ease-out 0.3s both;\n          border: 1px solid rgba(0, 0, 0, 0.08);\n        }\n        \n        .tooltip-content-z7h1j {\n          padding: 24px;\n        }\n        \n        .tooltip-header-a9c4f {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          margin-bottom: 16px;\n        }\n        \n        .sh-logo-mini-p6k8w {\n          flex-shrink: 0;\n        }\n        \n        .tooltip-header-a9c4f h3 {\n          margin: 0;\n          font-size: 18px;\n          font-weight: 600;\n          color: #1a1a1a;\n          font-family: "Red Hat Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n        }\n        \n        .tooltip-body-j5l9m {\n          margin-bottom: 0;\n        }\n        \n        .tooltip-body-j5l9m p {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n          line-height: 1.5;\n          color: #4a4a4a;\n          font-family: "Red Hat Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n        }\n        \n        .tooltip-body-j5l9m p:first-child {\n          font-weight: 400;\n          color: #2d3748;\n        }\n        \n        .tooltip-actions-w8k3n {\n          display: flex;\n          gap: 12px;\n          justify-content: center;\n        }\n        \n        .btn-primary-r4t9y {\n          padding: 8px 16px;\n          border-radius: 6px;\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          border: none;\n          background: linear-gradient(135deg, #0CC2ED 0%, #E600FF 50%, #FF003D 100%);\n          color: white;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .btn-primary-r4t9y:hover {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(0, 194, 237, 0.3);\n        }\n        \n        .tooltip-arrow-n6v2c {\n          position: absolute;\n          width: 16px;\n          height: 16px;\n          background: #f3fcfe;\n          border: 1px solid rgba(0, 0, 0, 0.08);\n          border-right: none;\n          border-bottom: none;\n          transform: rotate(45deg);\n          left: 32px;\n          top: -9px;\n        }\n        \n        @keyframes sh-spotlight-pulse {\n          0%, 100% { box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7), 0 0 20px rgba(255, 255, 255, 0.3); }\n          50% { box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7), 0 0 30px rgba(255, 255, 255, 0.5); }\n        }\n        \n        @keyframes sh-tooltip-appear {\n          from { \n            opacity: 0;\n            transform: translateY(10px) scale(0.95);\n          }\n          to { \n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n      ';const o=window.top.document.querySelector(".custom-toolbar-button");if(o){const n=o.getBoundingClientRect(),e=t.querySelector(".sh-onboarding-spotlight-q4w6r");e.style.left=n.left-5+"px",e.style.top=n.top-2+"px",e.style.width=n.width+10+"px",e.style.height=n.height+4+"px";const i=t.querySelector(".sh-onboarding-tooltip-x2v5b");i.style.left=Math.max(16,n.left+n.width/2-50+27)+"px",i.style.top=n.bottom+30+"px"}t.addEventListener("click",(function(){t.remove(),e.remove(),setTimeout((()=>{const n=window.top.document.querySelector(".custom-toolbar-button");n&&n.click()}),200)})),window.top.document.head.appendChild(e),window.top.document.body.appendChild(t)}function i(){window.top.document.createElement("style").textContent='\n        /* Hide product manager pages using CSS injection */\n        [data-test="grouped-list-item"]:has(p[class*="css-"]:contains("7qk3z8pl")) {\n          display: none !important;\n        }\n      ',window.top.document.querySelectorAll("p").forEach((n=>{if(n.textContent&&n.textContent.includes("7qk3z8pl")){const t=n.closest('[data-test="grouped-list-item"]');t&&(t.style.display="none")}}))}if(!window.top||!window.top.document)return;const a=window.top.document.querySelector("#frame-toolbar-desktop");if(!a)return void setTimeout(n,500);!function(){if(window.top.squareHeroOnboardingShown)return;if(function(){try{const n=window.top.document.querySelector('iframe[src*="squarehero-product-manager"]');return!(!n||"none"===n.style.display)||!!window.top.document.querySelector(".sh-onboarding-overlay-k8x7m")}catch(n){return!1}}())return;const n=new URLSearchParams(window.top.location.search),e=["sh-onboard","onboard","welcome","tour"];if(e.some((t=>"1"===n.get(t)||"true"===n.get(t)))){let o=!1;if(e.forEach((t=>{n.has(t)&&(n.delete(t),o=!0)})),o){const t=window.top.location.pathname+(n.toString()?"?"+n.toString():"");window.top.history.replaceState({},document.title,t)}window.top.squareHeroOnboardingShown=!0,setTimeout(t,1500)}}();const s=window.top.document.querySelector(".custom-toolbar-button");s&&s.parentNode&&s.parentNode.removeChild(s);const l="squarehero-logo-clip-path",d=document.createElement("div");d.className="custom-toolbar-button",d.innerHTML=`\n      <div class="sh-button">\n        <button class="squarehero-dashboard-button">\n          <svg width="27" height="30" viewBox="0 0 24 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <g clip-path="url(#${l})">\n              <path d="M11.2696 1.17143C11.495 1.04111 11.7476 0.975952 12.0004 0.975952C12.2531 0.975952 12.5057 1.04111 12.7311 1.17143L19.5318 5.10569C18.7798 6.27677 17.762 7.26317 16.5641 7.97633C15.1883 8.79551 13.6099 9.22841 12.0002 9.22841C10.3904 9.22841 8.81246 8.79551 7.43659 7.97651C6.23875 7.26353 5.22073 6.27695 4.46875 5.10587L11.2698 1.17143H11.2696Z" fill="#0CC2ED"/>\n              <path d="M12.731 25.8286C12.2803 26.0894 11.7202 26.0894 11.2694 25.8286L4.50488 21.9152C5.25901 20.7596 6.27381 19.787 7.46339 19.0845C8.83261 18.2758 10.4014 17.8484 12.0002 17.8484C13.599 17.8484 15.1678 18.2759 16.537 19.0845C17.7266 19.787 18.7414 20.7598 19.4955 21.9152L12.731 25.8286Z" fill="#0CC2ED"/>\n              <path d="M23.0214 19.0302C23.0214 19.5516 22.7413 20.0376 22.2906 20.2984L20.341 21.4263C19.5021 20.1256 18.3662 19.0314 17.032 18.2434C15.513 17.3463 13.773 16.8721 12.0004 16.8721C10.2279 16.8721 8.48793 17.3463 6.96889 18.2434C5.6347 19.0312 4.49883 20.1255 3.65991 21.4263L1.71027 20.2984C1.25955 20.0376 0.979492 19.5518 0.979492 19.0302V7.96988C0.979492 7.44842 1.25955 6.96242 1.71027 6.7016L3.6238 5.5946C4.45985 6.91004 5.5977 8.0174 6.93889 8.81588C8.4653 9.72452 10.2155 10.2048 12.0003 10.2048C13.785 10.2048 15.5354 9.72434 17.062 8.8157C18.403 8.0174 19.5409 6.90986 20.3769 5.59442L22.2908 6.7016C22.7415 6.96242 23.0216 7.44824 23.0216 7.96988V19.0302H23.0214Z" fill="#001E45"/>\n              <path d="M20.115 11.457L13.9784 12.6403C13.7072 12.6927 13.6465 13.0545 13.8856 13.1928L15.8005 14.3005C15.9737 14.4006 16.1869 14.4006 16.3599 14.3005L20.3203 12.0093C20.6117 11.8406 20.4452 11.3931 20.1148 11.4568L20.115 11.457Z" fill="white"/>\n              <path d="M10.0207 12.6403L3.8842 11.457C3.55384 11.3933 3.38732 11.841 3.67869 12.0094L7.63905 14.3007C7.81223 14.4007 8.02546 14.4007 8.19846 14.3007L10.1134 13.1929C10.3527 13.0545 10.292 12.6927 10.0206 12.6405L10.0207 12.6403Z" fill="white"/>\n              <path d="M16.0456 20.3526L9.90911 21.5359C9.63785 21.5883 9.57713 21.9501 9.81624 22.0883L11.7312 23.1961C11.9044 23.2961 12.1176 23.2961 12.2906 23.1961L16.2511 20.9048C16.5425 20.7362 16.376 20.2887 16.0456 20.3524V20.3526Z" fill="white"/>\n              <path d="M22.7776 5.85609L13.2182 0.325951C12.4669 -0.108569 11.5335 -0.108569 10.7822 0.325951L1.22285 5.85609C0.471589 6.29061 0.00488281 7.10061 0.00488281 7.96983V19.0301C0.00488281 19.8993 0.471589 20.7092 1.22285 21.1439L10.7822 26.674C11.1579 26.8913 11.579 27 12.0002 27C12.4215 27 12.8425 26.8913 13.2182 26.674L22.7776 21.1439C23.5288 20.7093 23.9955 19.8993 23.9955 19.0301V7.96983C23.9955 7.10061 23.5288 6.29079 22.7776 5.85609ZM11.2694 1.17141C11.4949 1.04109 11.7475 0.975931 12.0002 0.975931C12.253 0.975931 12.5055 1.04109 12.731 1.17141L19.5316 5.10567C18.7797 6.27675 17.7618 7.26315 16.564 7.97631C15.1881 8.79549 13.6098 9.22839 12 9.22839C10.3903 9.22839 8.81231 8.79549 7.43644 7.97649C6.2386 7.26351 5.22057 6.27693 4.46859 5.10585L11.2696 1.17141H11.2694ZM12.731 25.8285C12.2803 26.0894 11.7202 26.0894 11.2694 25.8285L4.50488 21.9152C5.25901 20.7596 6.2738 19.787 7.46339 19.0845C8.83261 18.2757 10.4014 17.8484 12.0002 17.8484C13.599 17.8484 15.1678 18.2759 16.537 19.0845C17.7266 19.787 18.7414 20.7597 19.4955 21.9152L12.731 25.8285ZM23.0212 19.0301C23.0212 19.5516 22.7411 20.0376 22.2904 20.2984L20.3408 21.4263C19.5018 20.1256 18.366 19.0314 17.0318 18.2433C15.5127 17.3462 13.7727 16.8721 12.0002 16.8721C10.2277 16.8721 8.4877 17.3462 6.96865 18.2433C5.63446 19.0312 4.49859 20.1254 3.65967 21.4263L1.71003 20.2984C1.25931 20.0376 0.979254 19.5518 0.979254 19.0301V7.96983C0.979254 7.44837 1.25931 6.96237 1.71003 6.70155L3.62357 5.59455C4.45961 6.90999 5.59746 8.01735 6.93865 8.81583C8.46506 9.72447 10.2153 10.2047 12 10.2047C13.7848 10.2047 15.5352 9.72429 17.0618 8.81565C18.4028 8.01735 19.5406 6.90981 20.3767 5.59437L22.2906 6.70155C22.7413 6.96237 23.0213 7.44819 23.0213 7.96983V19.0301H23.0212Z" fill="white"/>\n            </g>\n            <defs>\n              <clipPath id="${l}">\n                <rect width="24" height="27" fill="white"/>\n              </clipPath>\n            </defs>\n          </svg>\n        </button>\n      </div>\n    `;const c=a.querySelector('[data-test="frameToolbarEdit"]');c&&c.parentNode?c.parentNode.insertBefore(d,c.nextSibling):a.appendChild(d),d.querySelector("button").addEventListener("click",(n=>{n.stopPropagation(),function(){const n=window.top.document.querySelector(".squarehero-launcher-dropdown-kx9m3");n&&n.remove();const t=window.top.document.createElement("div");t.className="squarehero-launcher-dropdown-kx9m3",t.innerHTML='\n        <div class="launcher-modal-p8q7n">\n          <div class="plugin-link-wrapper-x7h2m">\n            <div class="gradient-strip-t4j6h"></div>\n            <button class="plugin-card-w5r2k" data-action="product-manager">\n              <div class="plugin-icon-m9l3x">\n                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="46" fill="none" viewBox="0 0 40 46">\n                  <g clip-path="url(#a)">\n                    <path fill="url(#b)" d="M39.985 32.673V13.327a3.23 3.23 0 0 0-1.616-2.798L21.615.856a3.23 3.23 0 0 0-3.23 0L1.63 10.529a3.23 3.23 0 0 0-1.615 2.798v19.346a3.23 3.23 0 0 0 1.615 2.798l16.754 9.673c1 .577 2.231.577 3.231 0l16.754-9.673a3.23 3.23 0 0 0 1.616-2.798"/>\n                    <path fill="url(#c)" d="M20 2.038c.283 0 .562.075.807.217l16.755 9.673c.498.288.807.824.807 1.4v19.345a1.62 1.62 0 0 1-.807 1.4l-16.755 9.673a1.62 1.62 0 0 1-1.615 0L2.438 34.072a1.62 1.62 0 0 1-.808-1.399V13.327c0-.575.31-1.111.808-1.399l16.754-9.673c.245-.142.524-.217.808-.217m0-1.615a3.23 3.23 0 0 0-1.616.433L1.63 10.529a3.23 3.23 0 0 0-1.615 2.798v19.346a3.23 3.23 0 0 0 1.615 2.798l16.754 9.673a3.23 3.23 0 0 0 3.231 0l16.754-9.673a3.23 3.23 0 0 0 1.616-2.798V13.327a3.23 3.23 0 0 0-1.616-2.798L21.615.856A3.23 3.23 0 0 0 20 .423"/>\n                    <path stroke="#fff" stroke-miterlimit="10" stroke-width=".521" d="m27.52 29.253 4.37-4.37a2.783 2.783 0 0 0 0-3.936l-4.37-4.37a2.78 2.78 0 0 0-1.967-.815h-14.43a2.78 2.78 0 0 0-2.783 2.782v8.741a2.78 2.78 0 0 0 2.783 2.783h14.43c.738 0 1.445-.293 1.967-.815Z"/>\n                    <path stroke="#fff" stroke-linecap="round" stroke-miterlimit="10" stroke-width=".521" d="M14.498 19.338h8.203M10.66 19.338h2.323"/>\n                    <path stroke="#fff" stroke-miterlimit="10" stroke-width=".521" d="M13.74 20.095a.757.757 0 1 0 0-1.515.757.757 0 0 0 0 1.515Z"/>\n                    <path stroke="#fff" stroke-linecap="round" stroke-miterlimit="10" stroke-width=".521" d="M14.498 26.49h8.203M10.66 26.49h2.323"/>\n                    <path stroke="#fff" stroke-miterlimit="10" stroke-width=".521" d="M13.74 27.248a.757.757 0 1 0 .001-1.515.757.757 0 0 0 0 1.515Z"/>\n                    <path stroke="#fff" stroke-linecap="round" stroke-miterlimit="10" stroke-width=".521" d="M20.414 22.914h2.287M10.66 22.914h8.24"/>\n                    <path stroke="#fff" stroke-miterlimit="10" stroke-width=".521" d="M19.657 23.672a.757.757 0 1 0 0-1.515.757.757 0 0 0 0 1.515Z"/>\n                    <path fill="#fff" d="m30.854 22.574-.383-.036a1.5 1.5 0 0 0-.164-.408l.249-.308a.18.18 0 0 0-.013-.24l-.216-.216a.18.18 0 0 0-.24-.013l-.305.246a1.5 1.5 0 0 0-.41-.17l-.037-.384a.18.18 0 0 0-.178-.163h-.302a.18.18 0 0 0-.179.162l-.036.385a1.5 1.5 0 0 0-.411.17l-.297-.238a.18.18 0 0 0-.24.013l-.216.216a.18.18 0 0 0-.013.24l.242.3q-.112.189-.165.407l-.382.036a.18.18 0 0 0-.163.179v.302c0 .092.07.17.163.178l.387.037q.056.213.167.397l-.257.318a.18.18 0 0 0 .013.24l.217.216c.065.065.168.07.24.012l.32-.259q.182.108.393.16l.038.408a.18.18 0 0 0 .179.163h.302a.18.18 0 0 0 .178-.163l.038-.407q.211-.054.394-.161l.313.252a.18.18 0 0 0 .24-.013l.216-.217a.18.18 0 0 0 .012-.24l-.249-.309q.111-.184.167-.398l.388-.036a.18.18 0 0 0 .163-.179v-.302a.18.18 0 0 0-.163-.178m-1.848 1.265a.946.946 0 1 1 0-1.893.946.946 0 0 1 0 1.893"/>\n                  </g>\n                  <defs>\n                    <linearGradient id="b" x1="10.007" x2="29.992" y1="40.308" y2="5.692" gradientUnits="userSpaceOnUse">\n                      <stop stop-color="#1f1f1f"/>\n                      <stop offset="1" stop-color="#001e45"/>\n                    </linearGradient>\n                    <linearGradient id="c" x1=".015" x2="39.985" y1="23" y2="23" gradientUnits="userSpaceOnUse">\n                      <stop stop-color="#0cc2ed"/>\n                      <stop offset=".5" stop-color="#e600ff"/>\n                      <stop offset="1" stop-color="#ff003d"/>\n                    </linearGradient>\n                    <clipPath id="a">\n                      <path fill="#fff" d="M0 .18h40v45.64H0z"/>\n                    </clipPath>\n                  </defs>\n                </svg>\n              </div>\n              <div class="plugin-content-b7f4j">\n                <div class="plugin-title-n6g8k">Advanced Product Manager</div>\n                <div class="plugin-description-v1c5z">Quickly manage and bulk edit your products</div>\n              </div>\n            </button>\n            <div class="uninstall-link-container-x9k2m">\n              <button class="dashboard-link-btn-m3n8p" id="squarehero-dashboard-link">\n                Manage account\n              </button>\n              <button class="uninstall-link-btn-p5h7n" id="squarehero-uninstall-link">\n                Uninstall plugin\n              </button>\n            </div>\n          </div>\n        </div>\n      ';const i=window.top.document.querySelector(".custom-toolbar-button");if(i){const n=i.getBoundingClientRect(),e=t.querySelector(".launcher-modal-p8q7n");e.style.position="absolute",e.style.top=n.bottom+25+"px",e.style.left=n.left+"px",e.style.zIndex="10000"}t.addEventListener("click",(n=>{n.target===t&&t.remove()})),t.querySelector(".plugin-link-wrapper-x7h2m").addEventListener("click",(()=>{!function(){const n=window.top.document.querySelector("iframe#sqs-site-frame");if(!n||!n.contentDocument)return console.error('Cannot access preview frame'),!1;const t=n.contentDocument.createElement("a");t.href="/sh-product-manager-7qk3z8pl",t.style.display="none",n.contentDocument.body.appendChild(t);const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:n.contentWindow});t.dispatchEvent(e),setTimeout((()=>{try{t.parentNode&&t.parentNode.removeChild(t)}catch(n){}}),100)}(),t.remove()}));const r=t.querySelector("#squarehero-uninstall-link");r?r.addEventListener("click",(async n=>{n.stopPropagation(),t.remove(),await async function(){const n=window.top.document,t=e(),i=await async function(){try{const n=`${window.location.origin}/?format=json-pretty`,t=await fetch(n);if(t.ok){const n=await t.json(),e=n?.website?.siteTitle;if(e)return e}}catch(n){}return null}()||t,r=n.getElementById("squarehero-install-prompt");r&&r.remove();const a=n.createElement("div");a.id="squarehero-install-prompt",a.innerHTML=`\n      <style>\n        #squarehero-install-prompt {\n          position: fixed;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          top: 0;\n          left: 0;\n          z-index: 99999;\n          background: radial-gradient(at 86.9% 91.1%, #580F8C 0px, transparent 20%), \n                      radial-gradient(at 12.5% 10.2%, #4a137f 0px, transparent 50%), \n                      radial-gradient(at 83.2% 63.7%, #1b169d 0px, transparent 0%), \n                      radial-gradient(at 6.7% 12.6%, #1b169d 0px, transparent 50%), \n                      rgba(1, 30, 69, 0.95);\n          color: white;\n          padding: 0;\n          width: 100vw;\n          height: 70vh;\n          min-height: 470px;\n          border-radius: 0 0 70px 70px;\n          box-shadow: 0 0 30px 0 rgba(0, 0, 0, 0.55);\n          backdrop-filter: blur(10px);\n          box-sizing: border-box;\n          font-family: "Red Hat Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n          font-size: 14px;\n          line-height: 1.5;\n          overflow: hidden;\n          text-align: center;\n          transform: translateY(-100%);\n          transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n        }\n        \n        .squarehero-slide-in {\n          transform: translateY(0) !important;\n        }\n        \n        #squarehero-install-prompt .install-wrapper,\n        #squarehero-install-prompt .uninstall-content {\n          position: relative;\n          width: 400px;\n          z-index: 3;\n          background: rgba(255, 255, 255, 0.08);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(10px);\n          border-radius: 10px;\n          padding: 50px;\n          margin: 16px 0;\n        }\n        \n        #squarehero-install-prompt .logo-container {\n          text-align: center;\n          margin-bottom: 30px;\n        }\n        \n        #squarehero-install-prompt .uninstall-title {\n          font-size: 22px;\n          margin: 0 0 20px 0;\n        }\n        \n        #squarehero-install-prompt .site-info {\n          text-align: center;\n          margin: 20px 0;\n        }\n        \n        #squarehero-install-prompt .site-name {\n          font-size: 18px;\n          font-weight: 600;\n          margin: 0;\n        }\n        \n        #squarehero-install-prompt .site-domain {\n          font-size: 14px;\n          opacity: 0.7;\n          margin: 5px 0 0 0;\n        }\n        \n        #squarehero-install-prompt .action-buttons {\n          display: flex;\n          gap: 12px;\n          margin-top: 30px;\n        }\n        \n        #squarehero-install-prompt .error-close-button,\n        #squarehero-install-prompt .secondary-transparent-button {\n          flex: 1;\n          padding: 12px 24px;\n          border-radius: 6px;\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s;\n          border: none;\n        }\n\n     \n        \n        #squarehero-install-prompt .error-close-button {\n          background: #ff003d;\n          color: white;\n        }\n        \n        #squarehero-install-prompt .error-close-button:hover {\n          background: #cc0031;\n        }\n        \n        #squarehero-install-prompt .secondary-transparent-button {\n          background: rgba(255, 255, 255, 0.1);\n          color: white;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n        \n        #squarehero-install-prompt .secondary-transparent-button:hover {\n          background: rgba(255, 255, 255, 0.15);\n        }\n        \n        #squarehero-install-prompt .progress-content {\n          text-align: center;\n          padding: 20px;\n        }\n        \n        #squarehero-install-prompt .progress-title {\n          margin: 0 0 10px 0;\n          font-weight: 600;\n        }\n        \n        #squarehero-install-prompt .progress-container {\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 8px;\n          padding: 10px;\n          margin: 10px 0;\n        }\n        \n        #squarehero-install-prompt .progress-bar-container {\n          width: 100%;\n          height: 8px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 4px;\n          overflow: hidden;\n          margin: 10px 0;\n          position: relative;\n        }\n        \n        #squarehero-install-prompt #progress-bar {\n          height: 100%;\n          background: linear-gradient(90deg, #00D1FF 0%, #FF00E6 50%, #FF003D 100%);\n          background-size: 200% 100%;\n          animation: gradient-flow 3s ease-in-out infinite;\n          border-radius: 4px;\n          transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n          position: relative;\n          overflow: hidden;\n          width: 0%;\n        }\n        \n        #squarehero-install-prompt .shimmer {\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n          animation: shimmer 2s infinite;\n        }\n        \n        #squarehero-install-prompt #progress-text {\n          margin: 8px 0 0 0;\n          opacity: 0.8;\n          font-size: 12px;\n        }\n        \n        #squarehero-install-prompt .success-content {\n          text-align: center;\n          padding: 20px;\n          position: relative;\n          width: 400px;\n          z-index: 3;\n          background: rgba(255, 255, 255, 0.08);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(10px);\n          border-radius: 10px;\n          padding: 50px;\n          margin: 16px 0;\n        }\n        \n        #squarehero-install-prompt .success-title {\n          margin: 0 0 15px 0;\n          font-size: 22px;\n          color: white;\n        }\n        \n        #squarehero-install-prompt .success-subtitle {\n          margin: 0 0 15px 0;\n          font-size: 14px;\n          opacity: 0.8;\n        }\n        \n        #squarehero-install-prompt .done-button-large {\n          background: rgba(255, 255, 255, 0.9);\n          color: #333;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 10px;\n          cursor: pointer;\n          font-weight: 600;\n          font-size: 14px;\n          width: 100%;\n          transition: 0.3s;\n          margin-top: 20px;\n        }\n        \n        #squarehero-install-prompt .done-button-large:hover {\n          background: rgb(255, 255, 255);\n        }\n        \n        #squarehero-install-prompt .error-content {\n          text-align: center;\n          padding: 20px;\n          position: relative;\n          width: 400px;\n          z-index: 3;\n          background: rgba(255, 255, 255, 0.08);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(10px);\n          border-radius: 10px;\n          padding: 50px;\n          margin: 16px 0;\n        }\n        \n        #squarehero-install-prompt .error-title {\n          margin: 0 0 15px 0;\n          font-weight: 600;\n          font-size: 24px;\n          color: #FF003D;\n        }\n        \n        #squarehero-install-prompt .error-message {\n          margin: 0 0 20px 0;\n          font-size: 14px;\n          opacity: 0.8;\n        }\n        \n        @keyframes gradient-flow {\n          0% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n          100% { background-position: 0% 50%; }\n        }\n        \n        @keyframes shimmer {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n      </style>\n      <div class="uninstall-content">\n        <div class="logo-container">\n          <div class="logo-wrapper">\n            <img src="${m}" width="120" height="63" alt="SquareHero Logo" style="height: auto; max-width: 100%;">\n          </div>\n        </div>\n        <h3 class="uninstall-title">Uninstall Plugin?</h3>\n        <div class="site-info">\n          <p class="site-name">${i}</p>\n          <p class="site-domain">${t}.squarespace.com</p>\n        </div>\n        <p style="margin: 16px 0; opacity: 0.8; text-align: center;">This will remove the Advanced Product Manager from your site.</p>\n        <div class="action-buttons">\n          <button id="confirm-uninstall" class="error-close-button">Uninstall</button>\n          <button id="cancel-uninstall" class="secondary-transparent-button">Cancel</button>\n        </div>\n      </div>\n    `,n.body.appendChild(a),setTimeout((()=>{a.classList.add("squarehero-slide-in")}),10);const s=a.querySelector("#confirm-uninstall");a.querySelector("#cancel-uninstall").addEventListener("click",(()=>{a.remove()})),s.addEventListener("click",(async()=>{await async function(){const n=window.top.document.getElementById("squarehero-install-prompt");if(!n)return void console.error('SquareHero: Prompt element not found');const t=n.querySelector("style");n.innerHTML=`\n      ${t?t.outerHTML:""}\n      <div class="install-wrapper">\n        <div class="logo-container">\n          <div class="logo-wrapper">\n            <img src="${m}" width="120" height="63" alt="SquareHero Logo" style="height: auto; max-width: 100%;">\n          </div>\n        </div>\n        \n        <div class="progress-content">\n          <p class="progress-title">Uninstalling Plugin</p>\n          <div class="progress-container">\n            <div class="progress-bar-container">\n              <div id="progress-bar">\n                <div class="shimmer"></div>\n              </div>\n            </div>\n            <p id="progress-text">Starting uninstall...</p>\n          </div>\n        </div>\n      </div>\n    `;const e=n.querySelector("#progress-bar"),i=n.querySelector("#progress-text"),r=await async function(n){try{n(10,"Getting page information...");const t=document.cookie.split(";").find((n=>n.trim().startsWith("crumb=")))?.split("=")[1];if(!t)throw new Error("Could not find authentication token");const e=await fetch(`${window.location.origin}/api/commondata/GetSiteLayout`,{method:"GET",headers:{accept:"application/json","x-csrf-token":t},credentials:"include"});if(!e.ok)throw new Error(`Failed to get site layout: ${e.status}`);const i=await e.json();let r=null;if(r=function(n,t){if(n.layout&&Array.isArray(n.layout))for(const e of n.layout)if(e&&e.links&&Array.isArray(e.links))for(const n of e.links)if(n&&n.urlId===t)return n.collectionId||n.id;if(n.collections&&Array.isArray(n.collections))for(const e of n.collections)if(e&&e.urlId===t)return e.id;return null}(i,"sh-product-manager-7qk3z8pl"),!r)throw new Error("Plugin page not found");n(30,"Removing SquareHero core files..."),await async function(){try{const n=document.cookie.split(";").find((n=>n.trim().startsWith("crumb=")))?.split("=")[1];if(!n)throw new Error("Authentication token not found");const t=await fetch(`${window.location.origin}/api/config/GetInjectionSettings`,{method:"GET",headers:{accept:"application/json","x-csrf-token":n},credentials:"include"});if(!t.ok)throw new Error(`Failed to get injection settings: ${t.status}`);const e=await t.json();let o=e.header||"";const i=`\x3c!-- ${g}_START --\x3e`,r=`\x3c!-- ${g}_END --\x3e`,a=o.indexOf(i),s=o.indexOf(r);-1!==a&&-1!==s&&(o=o.substring(0,a)+o.substring(s+r.length));const l=new URLSearchParams;l.append("header",o),l.append("footer",e.footer||"");const d=await fetch(`${window.location.origin}/api/config/SaveInjectionSettings`,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded","x-csrf-token":n},body:l.toString(),credentials:"include"});if(!d.ok)throw new Error(`Failed to remove header injection: ${d.status}`);return{success:!0}}catch(n){throw console.error("Error removing header injection:", error),n}}(),n(70,"Removing plugin page...");const a=await fetch(`${window.location.origin}/api/commondata/RemoveCollection`,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded","x-csrf-token":t,accept:"application/json, text/plain, */*"},body:`collectionId=${r}`,credentials:"include"});if(!a.ok)throw new Error(`Failed to delete page: ${a.status}`);n(90,"Deactivating license...");try{const n=await o(),t=await fetch("https://activatesitefrominstallation-n6bvhzbxla-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:n,deactivate:!0})});await t.json()}catch(n){console.error('Error deactivating license:', deactivationError)}return n(100,"Uninstall complete!"),document.cookie="sh_plugin_installed=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/",{success:!0}}catch(n){return console.error("Uninstall error:", error),{success:!1,error:n.message}}}(((n,t)=>{e&&(e.style.width=n+"%"),i&&(i.textContent=t)}));if(r.success){const t=n.querySelector("style");n.innerHTML=`\n        ${t?t.outerHTML:""}\n        <div class="success-content">\n          <div class="logo-container">\n            <div class="logo-wrapper">\n              <img src="${m}" width="120" height="63" alt="SquareHero Logo" style="height: auto; max-width: 100%;">\n            </div>\n          </div>\n          <h3 class="success-title">Plugin Uninstalled</h3>\n          <p class="success-subtitle">SquareHero Advanced Product Manager has been removed from your site.</p>\n          <button class="done-button-large" id="uninstall-done">Done</button>\n        </div>\n      `,n.querySelector("#uninstall-done").addEventListener("click",(()=>{n.remove(),setTimeout((()=>{window.top.location.reload()}),100)}))}else{console.error('SquareHero: Uninstall failed:', result.error);const t=n.querySelector("style");n.innerHTML=`\n        ${t?t.outerHTML:""}\n        <div class="error-content">\n          <div class="logo-container">\n            <div class="logo-wrapper">\n              <img src="${m}" width="120" height="63" alt="SquareHero Logo" style="height: auto; max-width: 100%;">\n            </div>\n          </div>\n          <h3 class="error-title">Uninstall Failed</h3>\n          <p class="error-message">${r.error||"An error occurred during uninstallation."}</p>\n          <button class="error-close-button" id="error-close">Close</button>\n        </div>\n      `,n.querySelector("#error-close").addEventListener("click",(()=>{n.remove()}))}}()}))}()})):console.error('SquareHero: Uninstall link not found in dropdown');const a=t.querySelector("#squarehero-dashboard-link");a?a.addEventListener("click",(n=>{n.stopPropagation(),window.open("https://dashboard.squarehero.store/","_blank")})):console.error('SquareHero: Dashboard link not found in dropdown'),window.top.document.body.appendChild(t),setTimeout((()=>{const n=e=>{t.contains(e.target)||i.contains(e.target)||(t.remove(),window.top.document.removeEventListener("click",n))};window.top.document.addEventListener("click",n)}),100)}()}));const p=document.createElement("style");p.id="squarehero-base-styles",p.textContent='\n      .custom-toolbar-button {\n        display: none !important;\n        align-items: center;\n        margin-right: 10px;\n      }\n      .custom-toolbar-button.plugin-installed {\n        display: inline-flex !important;\n      }\n      .editing-page .custom-toolbar-button {\n        display: none !important;\n      }\n      .custom-toolbar-button:first-child {\n        display: none !important;\n      }\n      .custom-button button {\n        background: none;\n        border: none;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 5px;\n        border-radius: 4px;\n        transition: background 0.2s;\n      }\n      .custom-button button:hover {\n        background: rgba(0,0,0,0.05);\n      }\n      .squarehero-dashboard-button {\n        background: none;\n        color: #007bff;\n        font-weight: bold;\n        margin:0!important;\n        padding:5px!important;\n      }\n      .squarehero-dashboard-button:hover {\n        background: #f2f2f2;\n        border-radius: 4px;\n      }\n\n      /* Hide Squarespace elements when Product Manager is active */\n      .squarehero-product-manager-active #frame-toolbar-desktop {\n        display: none !important;\n      }\n\n      .squarehero-product-manager-active .js-device-view-frame {\n    height: 100% !important;\n}\n      \n      .squarehero-product-manager-active .shrink-button-transition {\n        display: none !important;\n      }\n\n      /* Launcher Dropdown Styles */\n      .squarehero-launcher-dropdown-kx9m3 {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0);\n        z-index: 9999;\n        font-family: "Red Hat Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n        animation: fadeIn 0.2s ease-out;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .launcher-modal-p8q7n {\n        background: none;\n        border-radius: 4px;\n        min-width: 320px;\n        position: absolute;\n        animation: slideDownFromTop 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n        padding: 10px;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-link-wrapper-x7h2m {\n        padding: 10px 20px;\n        border-radius: 4px;\n        transition: background-color 0.2s ease;\n        background: #f3fcfe;\n        position: relative;\n        box-shadow: 0 0 34px 0 rgba(0, 0, 0, 0.10);\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .gradient-strip-t4j6h {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        width: 7px;\n        border-radius: 3px 0 0 3px;\n        background: linear-gradient(180deg, #00D1FF 0.67%, #FF00E6 59.37%, #FF003D 99.33%);\n      }\n\n      /* Keyframes for animations */\n      @keyframes fadeIn {\n        0% { \n          opacity: 0; \n        }\n        100% { \n          opacity: 1; \n        }\n      }\n\n      @keyframes slideDownFromTop {\n        0% {\n          opacity: 0;\n          transform: translateY(-20px) scale(0.98);\n        }\n        100% {\n          opacity: 1;\n          transform: translateY(0) scale(1);\n        }\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-card-w5r2k {\n        display: flex;\n        align-items: center;\n        padding: 10px;\n        cursor: pointer;\n        border: none;\n        width: 100%;\n        background: transparent;\n        text-align: left;\n        transition: none;\n        position: relative;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-card-w5r2k:hover {\n        background: white;\n        border-radius: 4px;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-icon-m9l3x {\n        width: 48px;\n        height: 48px;\n        background: transparent;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-left: 0;\n        margin-right: 15px;\n        flex-shrink: 0;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-icon-m9l3x svg {\n        width: 32px;\n        height: auto;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-content-b7f4j {\n        flex: 1;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-title-n6g8k {\n        color: #011E45;\n        font-family: "Red Hat Display", sans-serif;\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 800;\n        line-height: normal;\n        margin-bottom: 4px;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .plugin-description-v1c5z {\n        color: rgba(1, 30, 69, 0.70);\n        font-family: "Red Hat Text", sans-serif;\n        font-size: 14px;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 130%;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .uninstall-link-container-x9k2m {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0 10px;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .dashboard-link-btn-m3n8p {\n        background: none;\n        border: none;\n        color: rgba(1, 30, 69, 0.50);\n        font-family: "Red Hat Text", sans-serif;\n        font-size: 12px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: color 0.2s ease;\n        text-decoration: none;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .dashboard-link-btn-m3n8p:hover {\n        color: #011e45;\n        text-decoration: underline;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .uninstall-link-btn-p5h7n {\n        background: none;\n        border: none;\n        color: rgba(1, 30, 69, 0.50);\n        font-family: "Red Hat Text", sans-serif;\n        font-size: 12px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: color 0.2s ease;\n        text-decoration: none;\n      }\n\n      .squarehero-launcher-dropdown-kx9m3 .uninstall-link-btn-p5h7n:hover {\n        color: #ff003d;\n        text-decoration: underline;\n      }\n    ';const u=window.top.document.getElementById("squarehero-base-styles");u&&u.parentNode&&u.parentNode.removeChild(u),window.top.document.head.appendChild(p),i(),new MutationObserver((()=>{i()})).observe(window.top.document.body,{childList:!0,subtree:!0}),function(){const n=window.top.document.createElement("link");n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;600;700;800&family=Red+Hat+Text:wght@400;500;600;700&display=swap",n.id="squarehero-fonts";const t=window.top.document.getElementById("squarehero-fonts");t&&t.parentNode&&t.parentNode.removeChild(t),window.top.document.head.appendChild(n);const e=window.top.document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/gh/squarehero-store/dashboard@latest/sh-helper.min.css",e.id="squarehero-styles";const o=window.top.document.getElementById("squarehero-styles");o&&o.parentNode&&o.parentNode.removeChild(o),window.top.document.head.appendChild(e)}(),function(){function n(){if(!window.top.squareHeroPluginActive)try{window.top.document.body.classList.add("squarehero-product-manager-active"),window.top.squareHeroPluginActive=!0}catch(n){console.error('SquareHero Helper: Could not add class to top window:', error.message)}}function t(){if(window.top.squareHeroPluginActive)try{window.top.document.body.classList.remove("squarehero-product-manager-active"),window.top.squareHeroPluginActive=!1}catch(n){console.error('SquareHero Helper: Could not remove class from top window:', error.message)}}void 0===window.top.squareHeroPluginActive&&(window.top.squareHeroPluginActive=!1),function e(){const o=window.top.document.querySelector("iframe#sqs-site-frame");o?o.addEventListener("load",(()=>{setTimeout((()=>{try{if(o.contentDocument){const e=o.contentDocument.querySelector(".sh-product-manager");e&&!window.top.squareHeroPluginActive?n():!e&&window.top.squareHeroPluginActive&&t()}}catch(n){window.top.squareHeroPluginActive&&t()}}),500)})):setTimeout(e,1e3)}(),function(){try{const e=window.top.document.querySelector("iframe#sqs-site-frame");if(!e)return window.top.squareHeroPluginActive&&t(),!1;if(!e.contentDocument)return window.top.squareHeroPluginActive&&t(),!0;const o=e.contentDocument.querySelector(".sh-product-manager");return o&&!window.top.squareHeroPluginActive?n():!o&&window.top.squareHeroPluginActive&&t(),window.top.squareHeroPluginActive||o}catch(n){return window.top.squareHeroPluginActive&&t(),!1}}()}(),function(){function n(){if(t)return;const n=window.top.document.querySelector(".App-sidebar .rpp-item-list");if(!n)return;const e=n.querySelectorAll('[data-test="grouped-list-item"]');for(const n of e){const e=n.querySelector("p");if(e&&"SquareHero Dashboard"===e.textContent.trim()){const e=n.querySelector("svg");if(e){const n=window.top.document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("width","18"),n.setAttribute("height","21"),n.setAttribute("fill","none"),n.setAttribute("viewBox","0 0 18 21"),n.innerHTML='<g clip-path="url(#a)"><path fill="#001E45" d="M16.71 14.418V5.612L9 1.209 1.29 5.612v8.805L9 18.82l7.71-4.402Z"/><path fill="#87C4CC" d="M16.71 14.418V5.612L9 1.209 1.29 5.612v8.805L9 18.82l7.71-4.402Z"/><path fill="#fff" d="M3.8 4.187a5.97 5.97 0 0 0 2.198 2.175 6.053 6.053 0 0 0 6.004 0 5.97 5.97 0 0 0 2.197-2.175l-5.2-2.978L3.798 4.18l.003.007ZM9 12.88a6.077 6.077 0 0 0-3 .8 5.994 5.994 0 0 0-2.2 2.171L9 18.82l5.199-2.969a5.995 5.995 0 0 0-2.2-2.171 6.077 6.077 0 0 0-3-.8Z"/><path fill="#0E0E0E" d="M14.677 4.457a6.52 6.52 0 0 1-2.4 2.374 6.61 6.61 0 0 1-6.555 0 6.52 6.52 0 0 1-2.4-2.374L1.29 5.612v8.805l2.033 1.162a6.52 6.52 0 0 1 2.399-2.375 6.61 6.61 0 0 1 6.556 0 6.52 6.52 0 0 1 2.4 2.375l2.032-1.162V5.612l-2.033-1.155Z"/><path fill="#0E0E0E" stroke="#0E0E0E" stroke-width=".5" d="M9 13.13c-1.01 0-2.004.264-2.878.764-.801.457-1.476 1.1-1.971 1.869L9 18.53l4.848-2.768a5.721 5.721 0 0 0-1.97-1.87A5.803 5.803 0 0 0 9 13.132Zm5.76-8.339a6.77 6.77 0 0 1-2.358 2.256 6.864 6.864 0 0 1-6.804 0 6.77 6.77 0 0 1-2.36-2.256l-1.698.965v8.514l1.698.972a6.773 6.773 0 0 1 2.36-2.256A6.859 6.859 0 0 1 9 12.085c1.194 0 2.367.31 3.402.901a6.77 6.77 0 0 1 2.36 2.256l1.698-.972V5.757l-1.7-.965ZM4.153 4.267a5.721 5.721 0 0 0 1.97 1.87 5.804 5.804 0 0 0 5.756 0 5.722 5.722 0 0 0 1.971-1.87L9 1.495 4.153 4.267Zm13.361 10.61-.127.073-.275.156-1.74.995-.295.168-.478.271-5.2 2.97-.275.157-.124.071-.125-.071-.276-.157L.89 15.106v.001l-.127-.072-.15-.085-.125-.072V5.149l.127-.072.276-.156.01-.006h.002L8.599.518l.276-.158L9 .29l.124.071.275.159V.519l7.707 4.4.281.16.127.071v9.728Z"/><path fill="#fff" d="M15.464 8.463 9.854 9.53l1.87 1.067 3.74-2.135ZM2.536 8.463l5.61 1.068-1.87 1.067-3.74-2.135Z"/><path fill="#0E0E0E" d="m12.741 14.28-5.61 1.068 1.87 1.068 3.74-2.136Z"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v20.5H0z"/></clipPath></defs>',e.parentNode.replaceChild(n,e),void(t=!0)}}}}let t=!1;n(),t||new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&n()}))})).observe(window.top.document.body,{childList:!0,subtree:!0})}(),async function(){try{if(await r()){const n=window.top.document.querySelector(".custom-toolbar-button");n&&n.classList.add("plugin-installed")}}catch(n){console.error('Error checking plugin installation:', error)}}()}function t(n,t,e){const o=new Date;o.setTime(o.getTime()+24*e*60*60*1e3);const i="expires="+o.toUTCString();document.cookie=n+"="+t+";"+i+";path=/"}function e(){const n=window.location.hostname,t=n.split(".");return t.length>=3&&"squarespace"===t[t.length-2]?t[0]:n}async function o(){try{const n=document.cookie.split(";").find((n=>n.trim().startsWith("crumb=")))?.split("=")[1];if(!n)return console.error('No crumb cookie found - user may not be logged into Squarespace'),null;const t=await fetch(`${window.location.origin}/api/commondata/GetCollections`,{method:"GET",headers:{accept:"application/json, text/plain, */*","x-csrf-token":n},credentials:"include"});if(!t.ok)return console.error('Failed to fetch collections:', response.status),null;const e=(await t.json()).collections||{},o=Object.keys(e);return o.length>0?e[o[0]].websiteId||o[0]:(console.error('No collections found - site may not have any pages'),null)}catch(n){return console.error('Failed to get website ID:', error),null}}async function i(){if(window.location.hostname.includes("squarespace.com")&&"true"!==function(){const n="sh_plugin_installed=",t=document.cookie.split(";");for(let e=0;e<t.length;e++){let o=t[e].trim();if(0===o.indexOf(n))return o.substring(20)}return null}()&&document.cookie.includes("crumb="))return await r()?(t("sh_plugin_installed","true",365),void function(){const n=window.top?window.top.document:document;if(n.getElementById("squarehero-install-prompt"))return;n.body.insertAdjacentHTML("beforeend",'\n      <style>\n        #squarehero-install-prompt {\n          position: fixed;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          top: 0;\n          left: 0;\n          z-index: 99999;\n          background: radial-gradient(at 86.9% 91.1%, #580F8C 0px, transparent 20%), \n                      radial-gradient(at 12.5% 10.2%, #4a137f 0px, transparent 50%), \n                      radial-gradient(at 83.2% 63.7%, #1b169d 0px, transparent 0%), \n                      radial-gradient(at 6.7% 12.6%, #1b169d 0px, transparent 50%), \n                      rgba(1, 30, 69, 0.95);\n          color: white;\n          padding: 0;\n          width: 100vw;\n          height: 70vh;\n          min-height: 470px;\n          border-radius: 0 0 70px 70px;\n          box-shadow: 0 0 30px 0 rgba(0, 0, 0, 0.55);\n          backdrop-filter: blur(10px);\n          box-sizing: border-box;\n          font-family: "Red Hat Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n          font-size: 14px;\n          line-height: 1.5;\n          overflow: hidden;\n          text-align: center;\n          transform: translateY(-100%);\n          transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n        }\n\n        \n        #squarehero-install-prompt .install-wrapper {\n          position: relative;\n          width: 400px;\n          z-index: 3;\n          background: rgba(255, 255, 255, 0.08);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(10px);\n          border-radius: 10px;\n          padding: 50px;\n          margin: 16px 0;\n        }\n        \n        #squarehero-install-prompt .logo-container {\n          text-align: center;\n          margin-bottom: 30px;\n        }\n        \n        #squarehero-install-prompt .logo-wrapper {\n          width: 120px;\n          height: 63px;\n          margin: 0 auto 20px auto;\n        }\n        \n        #squarehero-install-prompt .logo-wrapper img {\n          width: 100%;\n          height: 100%;\n          object-fit: contain;\n        }\n        \n        #squarehero-install-prompt .site-info {\n          padding: 16px;\n          margin: 16px 0;\n        }\n        \n        #squarehero-install-prompt .site-name {\n          margin: 0 0 8px 0;\n          font-size: 15px;\n          font-weight: 600;\n        }\n        \n        #squarehero-install-prompt .site-domain {\n          margin: 0 0 6px 0;\n          opacity: 0.7;\n          font-size: 13px;\n        }\n        \n        #squarehero-install-prompt .action-buttons {\n          display: flex;\n          gap: 12px;\n          flex-direction: column;\n        }\n        \n        #squarehero-install-prompt .close-link-btn {\n          background: none;\n          border: none;\n          color: white;\n          padding: 10px;\n          font-size: 14px;\n          font-weight: 400;\n          text-decoration: underline;\n          cursor: pointer;\n          transition: opacity 0.3s ease;\n          opacity: 0.7;\n          font-family: inherit;\n        }\n        \n        #squarehero-install-prompt .close-link-btn:hover {\n          opacity: 1;\n        }\n      </style>\n      <div id="squarehero-install-prompt">\n        <div class="install-wrapper">\n          <div class="logo-container">\n            <div class="logo-wrapper">\n              <img src="https://cdn.jsdelivr.net/gh/squarehero-store/advanced-product-manager@latest/dist/sh-logo.svg" alt="SquareHero Logo">\n            </div>\n          </div>\n          \n          <div class="site-info">\n            <p class="site-name">Already Installed</p>\n            <p class="site-domain">The plugin is already installed on this site</p>\n          </div>\n          \n          <div class="action-buttons">\n            <button class="close-link-btn" id="squarehero-already-installed-close">\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    ');const t=n.getElementById("squarehero-install-prompt");setTimeout((()=>{t.style.transform="translateY(0)"}),100),n.getElementById("squarehero-already-installed-close").addEventListener("click",(()=>{const t=n.getElementById("squarehero-install-prompt");t&&(t.style.transform="translateY(-100%)",setTimeout((()=>t.remove()),500))}))}()):void function(n,e=!1){const i=window.top?window.top.document:document;if(u||i.getElementById("squarehero-install-prompt"))return;u=!0;i.body.insertAdjacentHTML("beforeend",`\n      <style>\n        #squarehero-install-prompt {\n          position: fixed;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          top: 0;\n          left: 0;\n          z-index: 99999;\n          background: radial-gradient(at 86.9% 91.1%, #580F8C 0px, transparent 20%), \n                      radial-gradient(at 12.5% 10.2%, #4a137f 0px, transparent 50%), \n                      radial-gradient(at 83.2% 63.7%, #1b169d 0px, transparent 0%), \n                      radial-gradient(at 6.7% 12.6%, #1b169d 0px, transparent 50%), \n                      rgba(1, 30, 69, 0.95);\n          color: white;\n          padding: 0;\n          width: 100vw;\n          height: 70vh;\n          min-height: 470px;\n          border-radius: 0 0 70px 70px;\n          box-shadow: 0 0 30px 0 rgba(0, 0, 0, 0.55);\n          backdrop-filter: blur(10px);\n          box-sizing: border-box;\n          font-family: "Red Hat Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n          font-size: 14px;\n          line-height: 1.5;\n          overflow: hidden;\n          text-align: center;\n          transform: translateY(-100%);\n          transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n        }\n        \n        #squarehero-install-prompt .install-wrapper {\n          position: relative;\n          width: 400px;\n          z-index: 3;\n          background: rgba(255, 255, 255, 0.08);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(10px);\n          border-radius: 10px;\n          padding: 50px;\n          margin: 16px 0;\n        }\n        \n        #squarehero-install-prompt .logo-container {\n          text-align: center;\n          margin-bottom: 30px;\n        }\n        \n        #squarehero-install-prompt .logo-wrapper {\n          width: 120px;\n          height: 63px;\n          margin: 0 auto 20px auto;\n        }\n        \n        #squarehero-install-prompt .site-info {\n          padding: 16px;\n          margin: 16px 0;\n        }\n        \n        #squarehero-install-prompt .site-name {\n          margin: 0 0 8px 0;\n          font-size: 15px;\n          font-weight: 600;\n        }\n        \n        #squarehero-install-prompt .site-domain {\n          margin: 0 0 6px 0;\n          opacity: 0.7;\n          font-size: 13px;\n        }\n        \n        #squarehero-install-prompt .action-buttons {\n          display: flex;\n          gap: 12px;\n          flex-direction: column;\n        }\n        \n        #squarehero-install-prompt h3 {\n          font-size: 22px;\n        }\n        \n        #squarehero-install-prompt p.button--fine-print {\n          margin-top: 0;\n          opacity: 0.7;\n        }\n        \n        #squarehero-install-prompt .main-action-btn {\n          background: none;\n          position: relative;\n          z-index: 1;\n          color: #fff;\n          border: none;\n          cursor: pointer;\n          outline: none;\n          font-family: inherit;\n          padding: 14px 24px;\n          border-radius: 10px;\n          font-size: 14px;\n          font-weight: 400;\n          line-height: normal;\n          text-decoration: none;\n          transition: all 0.3s ease;\n          flex: 1;\n        }\n        \n        #squarehero-install-prompt .main-action-btn:before {\n          content: "";\n          position: absolute;\n          inset: 0;\n          padding: 2px;\n          border-radius: 10px;\n          background: linear-gradient(90deg, #00D1FF 0%, #FF00E6 33.33%, #FF003D 66.66%, #00D1FF 100%);\n          background-size: 200% 100%;\n          -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n          mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n          -webkit-mask-composite: xor;\n          mask-composite: exclude;\n          transition: background-position 0.5s ease;\n        }\n        \n        #squarehero-install-prompt .main-action-btn:hover:before {\n          background-position: 150% 0;\n        }\n        \n        #squarehero-install-prompt .main-action-btn:hover {\n          transform: translateY(-1px);\n        }\n        \n        #squarehero-install-prompt .secondary-action-btn {\n          background: none;\n          position: relative;\n          z-index: 1;\n          color: #fff;\n          border: 2px solid rgba(255, 255, 255, 0.3);\n          cursor: pointer;\n          outline: none;\n          font-family: inherit;\n          padding: 14px 24px;\n          border-radius: 10px;\n          font-size: 14px;\n          font-weight: 400;\n          line-height: normal;\n          text-decoration: none;\n          transition: all 0.3s ease;\n          flex: 1;\n        }\n        \n        #squarehero-install-prompt .secondary-action-btn:hover {\n          border-color: rgba(255, 255, 255, 0.6);\n          transform: translateY(-1px);\n        }\n        \n        #squarehero-install-prompt .close-link-btn {\n          background: none;\n          border: none;\n          color: white;\n          padding: 10px;\n          font-size: 14px;\n          font-weight: 400;\n          text-decoration: underline;\n          cursor: pointer;\n          transition: opacity 0.3s ease;\n          opacity: 0.7;\n          font-family: inherit;\n        }\n        \n        #squarehero-install-prompt .close-link-btn:hover {\n          opacity: 1;\n        }\n        \n        #squarehero-install-prompt .progress-content {\n          text-align: center;\n          padding: 20px;\n        }\n        \n        #squarehero-install-prompt .progress-title {\n          margin: 0 0 10px 0;\n          font-weight: 600;\n        }\n        \n        #squarehero-install-prompt .progress-container {\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 8px;\n          padding: 10px;\n          margin: 10px 0;\n        }\n        \n        #squarehero-install-prompt .progress-bar-container {\n          width: 100%;\n          height: 8px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 4px;\n          overflow: hidden;\n          margin: 10px 0;\n          position: relative;\n        }\n        \n        #squarehero-install-prompt .progress-bar {\n          height: 100%;\n          background: linear-gradient(90deg, #00D1FF 0%, #FF00E6 50%, #FF003D 100%);\n          background-size: 200% 100%;\n          animation: gradient-flow 3s ease-in-out infinite;\n          border-radius: 4px;\n          transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n          position: relative;\n          overflow: hidden;\n          width: 0%;\n        }\n        \n        #squarehero-install-prompt .shimmer {\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n          animation: shimmer 2s infinite;\n        }\n        \n        #squarehero-install-prompt .progress-text {\n          margin: 8px 0 0 0;\n          opacity: 0.8;\n          font-size: 12px;\n        }\n        \n        @keyframes gradient-flow {\n          0% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n          100% { background-position: 0% 50%; }\n        }\n        \n        @keyframes shimmer {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n      </style>\n      <div id="squarehero-install-prompt">\n        <div class="install-wrapper">\n          <div class="logo-container">\n            <div class="logo-wrapper">\n              <img src="${m}" width="120" height="63" alt="SquareHero Logo" style="height: auto; max-width: 100%;">\n            </div>\n          </div>\n          \n          <div class="site-info">\n            <h3>${e?"Reinstall Plugin":"Install Plugin"}</h3>\n            <p class="site-domain">${n}.squarespace.com</p>\n          </div>\n          \n          <div class="action-buttons">\n            <button class="main-action-btn" id="squarehero-install-yes">\n              ${e?"Reinstall Plugin":"Begin installation"}\n            </button>\n            <button class="close-link-btn" id="squarehero-install-close">\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    `);const r=i.getElementById("squarehero-install-prompt");setTimeout((()=>{r.style.transform="translateY(0)"}),100),i.getElementById("squarehero-install-yes").addEventListener("click",(()=>async function(n,e){if(!h){h=!0,function(){const n=(window.top?window.top.document:document).getElementById("squarehero-install-prompt");if(!n)return;n.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" width="120" height="63" alt="SquareHero Logo" style="height: auto; max-width: 100%;">\n        </div>\n      </div>\n      \n      <div class="progress-content">\n        <p class="progress-title">Installing Plugin</p>\n        <div class="progress-container">\n          <div class="progress-bar-container">\n            <div class="progress-bar" id="progress-bar">\n              <div class="shimmer"></div>\n            </div>\n          </div>\n          <p class="progress-text" id="progress-text">Starting installation...</p>\n        </div>\n      </div>\n    `}();try{const n=await async function(n,e=!1){const i=["Rearranging pixels...","Warming the coffee machine...","Dusting off the product shelves...","Sweeping the digital floor...","Polishing the product images...","Straightening the virtual shelves...","Quietly preparing magic..."],r=()=>i[Math.floor(Math.random()*i.length)];try{s(30,r()),await async function(){return{success:!0,message:"Header injection already present"}}(),s(50,r());const n=document.cookie.split(";").find((n=>n.trim().startsWith("crumb=")))?.split("=")[1];if(!n)throw new Error("Could not find crumb cookie. Are you logged into Squarespace?");s(70,r());const i=await fetch(`${window.location.origin}/api/commondata/GetSiteLayout`,{method:"GET",headers:{accept:"application/json, text/plain, */*","x-csrf-token":n},credentials:"include"});if(!i.ok)throw new Error(`Failed to get site layout: ${i.status}`);if(l(await i.json(),"sh-product-manager-7qk3z8pl")&&!e)throw new Error("Advanced Product Manager page already exists on this site");s(85,r()),await new Promise((n=>setTimeout(n,500)));const a=(()=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+";let t="";for(let e=0;e<20;e++)t+=n[Math.floor(74*Math.random())];return t})(),d="Advanced Product Manager",c="sh-product-manager-7qk3z8pl",p={collectionData:{description:{html:"",raw:!1},enabled:!0,deleted:!1,folder:!1,regionName:"default",dirty:!1,body:null,collectionType:10,typeName:"page",title:d,newTitle:d,ordering:3,icon:"page",navigationTitle:"Product Manager 7qk3z8pl",urlId:c,type:10,headerInjectCode:"\x3c!-- Advanced Product Manager by SquareHero.store --\x3e<script>(function(){const s=document.createElement('script');s.src='https://cdn.jsdelivr.net/gh/squarehero-store/advanced-product-manager@latest/dist/squarehero-product-manager.js?v='+new Date().getTime();document.head.appendChild(s)})();<\/script><script>(function(){const l=document.createElement('link');l.rel='stylesheet';l.href='https://cdn.jsdelivr.net/gh/squarehero-store/advanced-product-manager@latest/dist/sh-product-manager.css?v='+new Date().getTime();document.head.appendChild(l)})();<\/script><style>#siteWrapper{display:none!important}</style>",passwordProtected:!0,password:a},memberAreaData:{memberAreaIds:[]}};s(95,r());const u=await fetch(`${window.location.origin}/api/commondata/SaveCollectionSettings`,{method:"POST",headers:{"content-type":"application/json","x-csrf-token":n},body:JSON.stringify(p),credentials:"include"});if(!u.ok)throw new Error(`Failed to create page: ${u.status}`);const h=await u.json();s(100,"Installation complete!"),t("sh_plugin_installed","true",365);try{await async function(){try{const n=document.cookie.split(";").find((n=>n.trim().startsWith("crumb=")))?.split("=")[1];if(!n)throw new Error("No crumb token found");const t=await fetch(`${window.location.origin}/api/1/extensions/details?preferredLocale=en-US`,{method:"GET",headers:{accept:"application/json, text/plain, */*","x-csrf-token":n},credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch extensions: ${t.status}`);const e=await t.json(),o="eCKbTYOjcWFJcuWwYtOask1ILkJpO6mv",i=e.extensions?.find((n=>n.clientId===o&&n.connected));if(!i)return{success:!0,message:"Extension not connected"};const r=i.connectionDetails?.id;if(!r)throw new Error("No connection ID found for SquareHero extension");const a=await fetch(`${window.location.origin}/api/1/extensions/connections/${r}`,{method:"DELETE",headers:{accept:"application/json, text/plain, */*","x-csrf-token":n},credentials:"include"});if(!a.ok)throw new Error(`Failed to disconnect extension: ${a.status}`);return{success:!0,message:"Extension disconnected successfully"}}catch(n){throw console.error(' Error disconnecting SquareHero extension:', error),n}}()}catch(n){}return{success:!0,pageUrl:`${window.location.origin}/${c}`,pagePassword:a,pageData:h,pageId:h.id,websiteId:await o()}}catch(n){return console.error("Installation error:", error),{success:!1,error:n.message}}}(0,e);n.success?function(n){const t=window.top?window.top.document:document,e=t.getElementById("squarehero-install-prompt");if(!e)return;e.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" alt="SquareHero Logo" style="width: 100%; height: 100%; object-fit: contain;">\n        </div>\n      </div>\n      \n      <div class="site-info">\n        <h3>Plugin installed successfully!</h3>\n        <p class="site-domain">Ready to activate?</p>\n      </div>\n      \n      <div class="action-buttons">\n        <button class="main-action-btn" id="squarehero-activate">\n          Activate plugin\n        </button>\n        <button class="secondary-action-btn" id="squarehero-success-close">\n          Explore plugin in demo mode\n        </button>\n        <p class="button--fine-print">Test everything risk-free, changes won't apply</p>\n      </div>\n    `,t.getElementById("squarehero-activate").addEventListener("click",(async()=>{await async function(n){const t=(window.top?window.top.document:document).getElementById("squarehero-install-prompt");if(!t)return;t.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" alt="SquareHero Logo" style="width: 100%; height: 100%; object-fit: contain;">\n        </div>\n      </div>\n      \n      <div class="progress-content">\n        <p class="progress-title">Activating License...</p>\n      </div>\n    `;try{const t=await fetch("https://activatesitefrominstallation-n6bvhzbxla-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:n.websiteId})}),e=await t.json();e.success?function(){const n=window.top?window.top.document:document,t=n.getElementById("squarehero-install-prompt");if(!t)return;t.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" alt="SquareHero Logo" style="width: 100%; height: 100%; object-fit: contain;">\n        </div>\n      </div>\n      \n      <div class="site-info">\n        <p class="site-name">License Activated!</p>\n        <p class="site-domain">Your plugin is ready to use.</p>\n      </div>\n      \n      <div class="action-buttons">\n        <button class="main-action-btn" id="squarehero-activated-close">\n          Continue\n        </button>\n      </div>\n    `,n.getElementById("squarehero-activated-close").addEventListener("click",(()=>{a();const n=window.top||window;n.location.href=`${n.location.origin}/config/pages/?sh-onboard=true`}))}():e.limitReached?function(n,t){const e=window.top?window.top.document:document,o=e.getElementById("squarehero-install-prompt");if(!o)return;o.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" alt="SquareHero Logo" style="width: 100%; height: 100%; object-fit: contain;">\n        </div>\n      </div>\n      \n      <div class="site-info">\n        <p class="site-name">Activation Limit Reached</p>\n        <p class="site-domain">You've activated ${n.activeSites} of ${n.siteLimit} site${1===n.siteLimit?"":"s"}</p>\n      </div>\n      \n      <div class="action-buttons">\n        <button class="main-action-btn" id="squarehero-upgrade-plan">\n          Upgrade Plan\n        </button>\n        <button class="close-link-btn" id="squarehero-limit-close">\n          Close (Skip Activation)\n        </button>\n      </div>\n    `,e.getElementById("squarehero-upgrade-plan").addEventListener("click",(()=>{window.open("https://dashboard.squarehero.store?page=manage","_blank")})),e.getElementById("squarehero-limit-close").addEventListener("click",(async()=>{await d(t),a();const n=window.top||window;n.location.href=`${n.location.origin}/config/pages/?sh-onboard=true`}))}(e,n.websiteId):e.needsSubscription?function(n){const t=window.top?window.top.document:document,e=t.getElementById("squarehero-install-prompt");if(!e)return;e.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" alt="SquareHero Logo" style="width: 100%; height: 100%; object-fit: contain;">\n        </div>\n      </div>\n      \n      <div class="site-info">\n        <h3>Subscription Required</h3>\n        <p class="site-domain">An active subscription is required to activate sites</p>\n      </div>\n      \n      <div class="action-buttons">\n        <button class="main-action-btn" id="squarehero-select-plan">\n          Select a Plan\n        </button>\n        <button class="close-link-btn" id="squarehero-subscription-close">\n          Explore plugin in demo mode\n        </button>\n      </div>\n    `,t.getElementById("squarehero-select-plan").addEventListener("click",(()=>{window.open("https://dashboard.squarehero.store?page=plans","_blank")})),t.getElementById("squarehero-subscription-close").addEventListener("click",(async()=>{await d(n),a();const t=window.top||window;t.location.href=`${t.location.origin}/config/pages/?sh-onboard=true`}))}(n.websiteId):c(e.error)}catch(n){console.error('Error activating site license:', activationError),c("Failed to activate license. Please try again later.")}}(n)})),t.getElementById("squarehero-success-close").addEventListener("click",(async()=>{await d(n.websiteId),a();const t=window.top||window;t.location.href=`${t.location.origin}/config/pages/?sh-onboard=true`}))}(n):p(n.error)}catch(n){p(n.message)}finally{h=!1}}}(0,e))),i.getElementById("squarehero-install-close").addEventListener("click",a)}(e(),!1)}async function r(){try{const n=document.cookie.split(";").find((n=>n.trim().startsWith("crumb=")))?.split("=")[1];if(!n)return!1;const t=await fetch(`${window.location.origin}/api/commondata/GetSiteLayout`,{method:"GET",headers:{accept:"application/json, text/plain, */*","x-csrf-token":n},credentials:"include"});return!!t.ok&&l(await t.json(),"sh-product-manager-7qk3z8pl")}catch(n){return console.error('Error checking for existing plugin page:', error),!1}}function a(){const n=(window.top?window.top.document:document).getElementById("squarehero-install-prompt");n&&(n.style.transform="translateY(-100%)",setTimeout((()=>n.remove()),500)),u=!1}function s(n,t){const e=window.top?window.top.document:document,o=e.getElementById("progress-bar"),i=e.getElementById("progress-text");o&&(o.style.width=n+"%"),i&&t&&(i.textContent=t)}function l(n,t){if(!n||!n.layout||!Array.isArray(n.layout))return!1;for(const e of n.layout)if(e&&e.links&&Array.isArray(e.links))for(const n of e.links)if(n&&n.urlId===t)return!0;if(n.collections&&Array.isArray(n.collections))for(const e of n.collections)if(e&&e.urlId===t)return!0;return!1}async function d(n){try{const t={websiteId:n,installOnly:!0},e=await fetch("https://activatesitefrominstallation-n6bvhzbxla-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});await e.json()}catch(n){console.error(' Error marking plugin as installed:', error)}}function c(n){const t=window.top?window.top.document:document,e=t.getElementById("squarehero-install-prompt");e&&(e.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" alt="SquareHero Logo" style="width: 100%; height: 100%; object-fit: contain;">\n        </div>\n      </div>\n      \n      <div class="site-info">\n        <p class="site-name">Activation Failed</p>\n        <p class="site-domain">${n}</p>\n      </div>\n      \n      <div class="action-buttons">\n        <button class="close-link-btn" id="squarehero-error-close">\n          Close\n        </button>\n      </div>\n    `,t.getElementById("squarehero-error-close").addEventListener("click",a))}function p(n){const t=window.top?window.top.document:document,e=t.getElementById("squarehero-install-prompt");e&&(e.querySelector(".install-wrapper").innerHTML=`\n      <div class="logo-container">\n        <div class="logo-wrapper">\n          <img src="${m}" alt="SquareHero Logo" style="width: 100%; height: 100%; object-fit: contain;">\n        </div>\n      </div>\n      \n      <div class="site-info">\n        <p class="site-name">Installation Failed</p>\n        <p class="site-domain">${n}</p>\n      </div>\n      \n      <div class="action-buttons">\n        <button class="close-link-btn" id="squarehero-error-close">\n          Close\n        </button>\n      </div>\n    `,t.getElementById("squarehero-error-close").addEventListener("click",a))}"complete"===document.readyState?n():window.addEventListener("load",n);let u=!1,h=!1;const g="SH_b4d455e8c78f9f23a982f3b4c1e67d2a",m="https://cdn.jsdelivr.net/gh/squarehero-store/advanced-product-manager@latest/dist/sh-logo.svg";"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}();